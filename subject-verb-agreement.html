<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adaptive Subject-Verb Agreement Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .progress-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 30px;
            position: relative;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #4caf50, #66bb6a);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-box {
            background: linear-gradient(135deg, #f8f9ff, #ffffff);
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        .question-card {
            background: #fff;
            border: 3px solid #667eea;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .question-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .question-type {
            background: #fff9e6;
            color: #f57c00;
            padding: 6px 15px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        .question-type.practice {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .question-text {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .blank {
            display: inline-block;
            min-width: 100px;
            border-bottom: 2px solid #667eea;
            margin: 0 5px;
            text-align: center;
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .option-btn {
            background: white;
            border: 3px solid #ddd;
            padding: 15px 25px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            font-weight: 500;
            text-align: center;
        }
        
        .option-btn:hover:not(:disabled) {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }
        
        .option-btn.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
            animation: correctPulse 0.5s;
        }
        
        .option-btn.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
            animation: shake 0.5s;
        }
        
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            animation: slideIn 0.5s;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .feedback.correct {
            background: #e8f5e9;
            border-left: 5px solid #4caf50;
        }
        
        .feedback.incorrect {
            background: #ffebee;
            border-left: 5px solid #f44336;
        }
        
        .feedback-title {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        
        .feedback.correct .feedback-title {
            color: #2e7d32;
        }
        
        .feedback.incorrect .feedback-title {
            color: #c62828;
        }
        
        .feedback-text {
            color: #555;
            line-height: 1.6;
        }
        
        .practice-trigger {
            background: #fff3e0;
            border: 2px solid #ff9800;
            padding: 20px;
            border-radius: 12px;
            margin-top: 15px;
            text-align: center;
        }
        
        .practice-trigger-title {
            color: #e65100;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .practice-trigger-text {
            color: #666;
            margin-bottom: 15px;
        }
        
        .next-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }
        
        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .next-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .completion-screen {
            text-align: center;
            padding: 40px;
        }
        
        .completion-icon {
            font-size: 5em;
            margin-bottom: 20px;
        }
        
        .completion-title {
            font-size: 2em;
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .final-stats {
            background: linear-gradient(135deg, #f8f9ff, #ffffff);
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 30px;
            margin: 30px auto;
            max-width: 500px;
        }
        
        .final-stat {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            margin: 10px 0;
            background: white;
            border-radius: 10px;
            font-size: 1.1em;
        }
        
        .final-stat-label {
            color: #666;
        }
        
        .final-stat-value {
            font-weight: bold;
            color: #667eea;
        }
        
        .restart-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }
        
        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Adaptive Practice</h1>
        <p class="subtitle">Get extra practice on questions you miss!</p>
        
        <div id="statsSection">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-number" id="totalAnswered">0</div>
                    <div class="stat-label">Questions Answered</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="correctCount">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="practiceCount">0</div>
                    <div class="stat-label">Practice Questions</div>
                </div>
            </div>
        </div>
        
        <div id="questionSection"></div>
        
        <div id="completionSection" class="hidden"></div>
    </div>
    
    <script>
        const mainQuestions = [
            {
                id: 1,
                type: "singular-plural",
                question: "The group of students _____ waiting for the bus.",
                options: ["is", "are"],
                correct: 0,
                explanation: "The subject is 'group' (singular), not 'students'. Ignore the prepositional phrase 'of students'.",
                practiceQuestions: [
                    {
                        question: "The team of players _____ practicing hard.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Team' is the singular subject."
                    },
                    {
                        question: "The box of chocolates _____ on the table.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Box' is the singular subject, not 'chocolates'."
                    },
                    {
                        question: "The list of names _____ very long.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'List' is the singular subject."
                    },
                    {
                        question: "A collection of stamps _____ valuable.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Collection' is the singular subject."
                    },
                    {
                        question: "The pack of wolves _____ hunting together.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Pack' is the singular subject, not 'wolves'."
                    }
                ]
            },
            {
                id: 2,
                type: "or-nor",
                question: "Either the teacher or the students _____ responsible.",
                options: ["is", "are"],
                correct: 1,
                explanation: "With 'either...or', match the verb to the closest subject. 'Students' (plural) is closer to the verb.",
                practiceQuestions: [
                    {
                        question: "Neither the cat nor the dogs _____ allowed inside.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "'Dogs' (plural) is closest to the verb."
                    },
                    {
                        question: "Either my brothers or my sister _____ coming.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Sister' (singular) is closest to the verb."
                    },
                    {
                        question: "Neither the manager nor the employees _____ happy.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "'Employees' (plural) is closest to the verb."
                    },
                    {
                        question: "Either the cookies or the cake _____ been eaten.",
                        options: ["has", "have"],
                        correct: 0,
                        explanation: "'Cake' (singular) is closest to the verb."
                    },
                    {
                        question: "Neither Tom nor his friends _____ the answer.",
                        options: ["knows", "know"],
                        correct: 1,
                        explanation: "'Friends' (plural) is closest to the verb."
                    }
                ]
            },
            {
                id: 3,
                type: "compound-and",
                question: "Sarah and Tom _____ studying together.",
                options: ["is", "are"],
                correct: 1,
                explanation: "Compound subjects joined by 'and' are always plural.",
                practiceQuestions: [
                    {
                        question: "The cat and the dog _____ playing outside.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "Two subjects joined by 'and' = plural."
                    },
                    {
                        question: "Pizza and pasta _____ my favorite foods.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "Compound subject with 'and' is always plural."
                    },
                    {
                        question: "Math and science _____ difficult subjects.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "Two subjects = plural verb."
                    },
                    {
                        question: "My mom and dad _____ going to the store.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "Compound subject = plural."
                    },
                    {
                        question: "The teacher and her students _____ excited.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "Joined by 'and' = plural verb."
                    }
                ]
            },
            {
                id: 4,
                type: "indefinite-singular",
                question: "Everyone in the classroom _____ ready for the test.",
                options: ["is", "are"],
                correct: 0,
                explanation: "Indefinite pronouns like 'everyone', 'someone', 'anyone' are always singular.",
                practiceQuestions: [
                    {
                        question: "Someone in the hallways _____ singing loudly.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Someone' is always singular."
                    },
                    {
                        question: "Nobody _____ the right answer.",
                        options: ["knows", "know"],
                        correct: 0,
                        explanation: "'Nobody' is singular."
                    },
                    {
                        question: "Everybody _____ tired after the game.",
                        options: ["was", "were"],
                        correct: 0,
                        explanation: "'Everybody' is always singular."
                    },
                    {
                        question: "Anyone with questions _____ welcome to ask.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Anyone' is singular."
                    },
                    {
                        question: "No one _____ arrived yet.",
                        options: ["has", "have"],
                        correct: 0,
                        explanation: "'No one' is always singular."
                    }
                ]
            },
            {
                id: 5,
                type: "there-here",
                question: "There _____ three books on the shelf.",
                options: ["is", "are"],
                correct: 1,
                explanation: "In sentences starting with 'there' or 'here', look for the subject after the verb. 'Books' is plural.",
                practiceQuestions: [
                    {
                        question: "Here _____ the solutions to your problems.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "'Solutions' (plural) is the subject."
                    },
                    {
                        question: "There _____ a cat under the table.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Cat' (singular) is the subject."
                    },
                    {
                        question: "Here _____ the keys you were looking for.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "'Keys' (plural) is the subject."
                    },
                    {
                        question: "There _____ many reasons to be happy.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "'Reasons' (plural) is the subject."
                    },
                    {
                        question: "Here _____ your assignment.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Assignment' (singular) is the subject."
                    }
                ]
            },
            {
                id: 6,
                type: "collective",
                question: "The committee _____ meeting tomorrow.",
                options: ["is", "are"],
                correct: 0,
                explanation: "Collective nouns (committee, team, family, class) are usually treated as singular when acting as one unit.",
                practiceQuestions: [
                    {
                        question: "The team _____ celebrating their victory.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Team' acts as one unit = singular."
                    },
                    {
                        question: "The family _____ going on vacation.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Family' as a unit = singular."
                    },
                    {
                        question: "The jury _____ reached a verdict.",
                        options: ["has", "have"],
                        correct: 0,
                        explanation: "'Jury' acting together = singular."
                    },
                    {
                        question: "The band _____ performing tonight.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Band' as one group = singular."
                    },
                    {
                        question: "The class _____ taking a field trip.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Class' as a unit = singular."
                    }
                ]
            },
            {
                id: 7,
                type: "quantity",
                question: "Five dollars _____ not enough for lunch.",
                options: ["is", "are"],
                correct: 0,
                explanation: "When talking about an amount as a single unit (money, time, distance), use singular verb.",
                practiceQuestions: [
                    {
                        question: "Ten miles _____ a long distance to walk.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Distance as one amount = singular."
                    },
                    {
                        question: "Two hours _____ not enough time.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Time period as one unit = singular."
                    },
                    {
                        question: "Fifty pounds _____ too heavy to carry.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Weight as one amount = singular."
                    },
                    {
                        question: "Three years _____ a long time to wait.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Time period = singular."
                    },
                    {
                        question: "Twenty dollars _____ the price.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Money amount = singular."
                    }
                ]
            },
            {
                id: 8,
                type: "inverted",
                question: "Behind the house _____ a beautiful garden.",
                options: ["is", "are"],
                correct: 0,
                explanation: "In inverted sentences, find the subject after the verb. 'Garden' is singular.",
                practiceQuestions: [
                    {
                        question: "In the drawer _____ my keys.",
                        options: ["is", "are"],
                        correct: 1,
                        explanation: "'Keys' (plural) comes after the verb."
                    },
                    {
                        question: "On the wall _____ several pictures.",
                        options: ["hangs", "hang"],
                        correct: 1,
                        explanation: "'Pictures' (plural) is the subject."
                    },
                    {
                        question: "Under the bridge _____ a small boat.",
                        options: ["floats", "float"],
                        correct: 0,
                        explanation: "'Boat' (singular) is the subject."
                    },
                    {
                        question: "At the end of the street _____ two stores.",
                        options: ["stands", "stand"],
                        correct: 1,
                        explanation: "'Stores' (plural) is the subject."
                    },
                    {
                        question: "Inside the box _____ a surprise.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Surprise' (singular) is the subject."
                    }
                ]
            },
            {
                id: 9,
                type: "titles",
                question: "\"The Lord of the Rings\" _____ my favorite book.",
                options: ["is", "are"],
                correct: 0,
                explanation: "Titles of books, movies, and songs are treated as singular, even if they contain plural words.",
                practiceQuestions: [
                    {
                        question: "\"Harry Potter and the Sorcerer's Stone\" _____ exciting.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Book title = singular."
                    },
                    {
                        question: "\"The Chronicles of Narnia\" _____ a great series.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Series title = singular."
                    },
                    {
                        question: "\"Star Wars\" _____ very popular.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Movie title = singular."
                    },
                    {
                        question: "\"The Beatles\" _____ a famous band name.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Band name as a title = singular."
                    },
                    {
                        question: "\"Gulliver's Travels\" _____ an adventure story.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "Book title = singular."
                    }
                ]
            },
            {
                id: 10,
                type: "fraction",
                question: "Half of the students _____ absent today.",
                options: ["is", "are"],
                correct: 1,
                explanation: "With fractions and percentages, match the verb to the noun that follows 'of'. 'Students' is plural.",
                practiceQuestions: [
                    {
                        question: "Half of the cake _____ gone.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Cake' is singular."
                    },
                    {
                        question: "Most of the books _____ been read.",
                        options: ["has", "have"],
                        correct: 1,
                        explanation: "'Books' is plural."
                    },
                    {
                        question: "Some of the water _____ spilled.",
                        options: ["was", "were"],
                        correct: 0,
                        explanation: "'Water' is singular."
                    },
                    {
                        question: "All of the cookies _____ delicious.",
                        options: ["was", "were"],
                        correct: 1,
                        explanation: "'Cookies' is plural."
                    },
                    {
                        question: "Part of the story _____ confusing.",
                        options: ["is", "are"],
                        correct: 0,
                        explanation: "'Story' is singular."
                    }
                ]
            }
        ];
        
        let currentQuestionIndex = 0;
        let currentPracticeIndex = 0;
        let inPracticeMode = false;
        let stats = {
            totalAnswered: 0,
            correct: 0,
            practiceTriggered: 0
        };
        
        function displayQuestion() {
            const questionSection = document.getElementById('questionSection');
            let question;
            let questionNum;
            let isMain = !inPracticeMode;
            
            if (inPracticeMode) {
                question = mainQuestions[currentQuestionIndex].practiceQuestions[currentPracticeIndex];
                questionNum = `${currentQuestionIndex + 1}.${currentPracticeIndex + 1}`;
            } else {
                question = mainQuestions[currentQuestionIndex];
                questionNum = currentQuestionIndex + 1;
            }
            
            const html = `
                <div class="question-card">
                    <div class="question-header">
                        <div class="question-number">Question ${questionNum}</div>
                        <div class="question-type ${inPracticeMode ? 'practice' : ''}">
                            ${inPracticeMode ? 'üîÑ Practice' : 'üìù Main'}
                        </div>
                    </div>
                    <div class="question-text">${question.question}</div>
                    <div class="options">
                        ${question.options.map((opt, idx) => 
                            `<button class="option-btn" onclick="checkAnswer(${idx})">${opt}</button>`
                        ).join('')}
                    </div>
                    <div id="feedback"></div>
                </div>
            `;
            
            questionSection.innerHTML = html;
        }
        
        function checkAnswer(selected) {
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => btn.disabled = true);
            
            let question;
            if (inPracticeMode) {
                question = mainQuestions[currentQuestionIndex].practiceQuestions[currentPracticeIndex];
            } else {
                question = mainQuestions[currentQuestionIndex];
            }
            
            const isCorrect = selected === question.correct;
            
            // Mark the selected answer
            buttons[selected].classList.add(isCorrect ? 'correct' : 'incorrect');
            
            // Always show the correct answer
            if (!isCorrect) {
                buttons[question.correct].classList.add('correct');
            }
            
            stats.totalAnswered++;
            if (isCorrect) {
                stats.correct++;
            }
            
            // Show feedback
            const feedbackDiv = document.getElementById('feedback');
            let feedbackHTML = `
                <div class="feedback ${isCorrect ? 'correct' : 'incorrect'}">
                    <div class="feedback-title">
                        ${isCorrect ? '‚úì Correct!' : '‚úó Incorrect'}
                    </div>
                    <div class="feedback-text">${question.explanation}</div>
                </div>
            `;
            
            // If it's a main question and they got it wrong, show practice trigger
            if (!isCorrect && !inPracticeMode) {
                stats.practiceTriggered++;
                feedbackHTML += `
                    <div class="practice-trigger">
                        <div class="practice-trigger-title">üéØ Let's Practice More!</div>
                        <div class="practice-trigger-text">
                            You'll get 5 similar questions to master this concept.
                        </div>
                    </div>
                `;
            }
            
            feedbackHTML += `<button class="next-btn" onclick="nextQuestion()">Next Question ‚Üí</button>`;
            feedbackDiv.innerHTML = feedbackHTML;
            
            updateStats();
        }
        
        function nextQuestion() {
            if (inPracticeMode) {
                currentPracticeIndex++;
                if (currentPracticeIndex >= 5) {
                    // Done with practice questions
                    inPracticeMode = false;
                    currentPracticeIndex = 0;
                    currentQuestionIndex++;
                }
            } else {
                const lastQuestion = mainQuestions[currentQuestionIndex];
                const buttons = document.querySelectorAll('.option-btn');
                const answeredCorrect = Array.from(buttons).some(btn => btn.classList.contains('correct') && !btn.disabled);
                
                if (!answeredCorrect) {
                    // They got it wrong, enter practice mode
                    inPracticeMode = true;
                    currentPracticeIndex = 0;
                } else {
                    // They got it right, move to next main question
                    currentQuestionIndex++;
                }
            }
            
            if (currentQuestionIndex >= mainQuestions.length) {
                showCompletion();
            } else {
                displayQuestion();
            }
        }
        
        function updateStats() {
            document.getElementById('totalAnswered').textContent = stats.totalAnswered;
            document.getElementById('correctCount').textContent = stats.correct;
            document.getElementById('practiceCount').textContent = stats.practiceTriggered * 5;
            
            const totalPossible = 10 + (stats.practiceTriggered * 5);
            const percentage = totalPossible > 0 ? Math.round((stats.totalAnswered / totalPossible) * 100) : 0;
            
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = percentage + '%';
        }
        
        function showCompletion() {
            document.getElementById('statsSection').classList.add('hidden');
            document.getElementById('questionSection').classList.add('hidden');
            
            const completionSection = document.getElementById('completionSection');
            completionSection.classList.remove('hidden');
            
            const accuracy = Math.round((stats.correct / stats.totalAnswered) * 100);
            const totalQuestions = 10 + (stats.practiceTriggered * 5);
            
            let emoji = 'üéâ';
            let message = 'Great job!';
            if (accuracy >= 90) {
                emoji = 'üåü';
                message = 'Outstanding! You\'re a grammar master!';
            } else if (accuracy >= 75) {
                emoji = 'üéâ';
                message = 'Great work! You\'re really getting it!';
            } else if (accuracy >= 60) {
                emoji = 'üëç';
                message = 'Good effort! Keep practicing!';
            } else {
                emoji = 'üí™';
                message = 'Keep going! Practice makes perfect!';
            }
            
            completionSection.innerHTML = `
                <div class="completion-screen">
                    <div class="completion-icon">${emoji}</div>
                    <div class="completion-title">${message}</div>
                    <div class="final-stats">
                        <div class="final-stat">
                            <span class="final-stat-label">Questions Answered:</span>
                            <span class="final-stat-value">${stats.totalAnswered}</span>
                        </div>
                        <div class="final-stat">
                            <span class="final-stat-label">Correct Answers:</span>
                            <span class="final-stat-value">${stats.correct}</span>
                        </div>
                        <div class="final-stat">
                            <span class="final-stat-label">Accuracy:</span>
                            <span class="final-stat-value">${accuracy}%</span>
                        </div>
                        <div class="final-stat">
                            <span class="final-stat-label">Practice Sets Triggered:</span>
                            <span class="final-stat-value">${stats.practiceTriggered}</span>
                        </div>
                        <div class="final-stat">
                            <span class="final-stat-label">Total Questions Seen:</span>
                            <span class="final-stat-value">${totalQuestions}</span>
                        </div>
                    </div>
                    <button class="restart-btn" onclick="restart()">Start Over</button>
                </div>
            `;
        }
        
        function restart() {
            currentQuestionIndex = 0;
            currentPracticeIndex = 0;
            inPracticeMode = false;
            stats = {
                totalAnswered: 0,
                correct: 0,
                practiceTriggered: 0
            };
            
            document.getElementById('statsSection').classList.remove('hidden');
            document.getElementById('questionSection').classList.remove('hidden');
            document.getElementById('completionSection').classList.add('hidden');
            
            updateStats();
            displayQuestion();
        }
        
        // Start the exercise
        displayQuestion();
    </script>
</body>
</html>